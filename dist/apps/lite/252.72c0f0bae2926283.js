"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[252],{880:(L,p,e)=>{e.d(p,{I:()=>E});var a=e(9808),o=e(1736),g=e(5601),l=e(6246),u=e(5064),t=e(3245),y=e(9518),s=e(5e3);let P=(()=>{class f{}return f.\u0275fac=function(A){return new(A||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({imports:[[a.ez,g.y,l.j,u.sp,t.K,y.W]]}),f})();var M=e(4436),h=e(977),D=e(1195),d=e(2824);let E=(()=>{class f{}return f.\u0275fac=function(A){return new(A||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({imports:[[a.ez,o.y,P,M._t,h.Cl,D.Jy,d.T]]}),f})()},7426:(L,p,e)=>{e.d(p,{k:()=>W});var a=e(655),o=e(9606),g=e(5459),l=e(9751),u=e(2662),t=e(5e3),y=e(9808),s=e(977),P=e(1195),M=e(7005),h=e(9300),D=e(3900),d=e(5963),E=e(1640);let f=(()=>{class i{constructor(n){this.window=n}shotVibrate(){window.navigator.vibrate(100)}}return i.\u0275fac=function(n){return new(n||i)(t.LFG("Window"))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _=e(3673),A=e(5601),U=e(6246),v=e(5064),S=e(9518),m=e(7886);const T=["widget"],z=["id",""];function x(i,c){1&i&&t._UZ(0,"tui-line-clamp",9),2&i&&t.Q6J("content",c.ngIf)("linesLimit",1)}function I(i,c){if(1&i&&t._UZ(0,"z-wave-multilevel-sensor",10),2&i){const n=t.oxw().ngIf;let r,O;t.Q6J("scale",null!==(r=n.scale)&&void 0!==r?r:"")("currentValue",null!==(O=n.level)&&void 0!==O?O:0)("mode",n.deviceType)}}const C=function(){return["sensorMultilevel","switchMultilevel"]};function B(i,c){if(1&i&&(t.TgZ(0,"tui-island",1,2),t._UZ(2,"tui-avatar",3),t.TgZ(3,"div",4),t._UZ(4,"tui-line-clamp",5),t.YNc(5,x,1,2,"tui-line-clamp",6),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",7),t.YNc(8,I,1,3,"z-wave-multilevel-sensor",8),t.qZA(),t.qZA()),2&i){const n=c.ngIf,r=t.oxw();t.xp6(2),t.Q6J("avatarUrl",n.iconPath)("rounded",!0),t.xp6(2),t.Q6J("content",n.title)("linesLimit",1),t.xp6(1),t.Q6J("ngIf",t.lcZ(6,6,r.location$)),t.xp6(3),t.Q6J("ngIf",t.DdM(8,C).includes(n.deviceType))}}let R=(()=>{class i{constructor(n,r,O,N,V){this.store=n,this.destroy$=r,this.renderer=O,this.mobileActionsService=N,this.router=V}press(){this.router.navigate(["/element",this.id])}tap(){this.store.dispatch(new E.lH(this.id)),this.renderer.addClass(this.widgetRef.nativeElement,"shake"),this.mobileActionsService.shotVibrate(),(0,d.H)(310).subscribe({complete:()=>this.renderer.removeClass(this.widgetRef.nativeElement,"shake")})}ngOnInit(){this.context$=this.store.select(({devices:{entities:{[this.id]:n}}})=>({iconPath:n.iconPath,title:n.title,inProgress:n.inProgress,location:n.location,updateTime:1e3*n.updateTime,deviceType:n.deviceType,scale:n.metrics.scaleTitle,level:n.metrics.level})),this.location$=this.context$.pipe((0,h.h)(({location:n})=>0!==n),(0,D.w)(({location:n})=>this.store.select(({locations:{entities:r}})=>null==r?void 0:r[n].title)))}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(o.yh),t.Y36(u.z),t.Y36(t.Qsj),t.Y36(f),t.Y36(_.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["z-wave-base-widget","id",""]],viewQuery:function(n,r){if(1&n&&t.Gf(T,5,t.SBq),2&n){let O;t.iGM(O=t.CRH())&&(r.widgetRef=O.first)}},hostBindings:function(n,r){1&n&&t.NdJ("press",function(){return r.press()})("tap",function(){return r.tap()})},inputs:{id:"id"},features:[t._Bn([u.z])],attrs:z,decls:2,vars:3,consts:[["tuiTouchable","transform","class","widget",4,"ngIf"],["tuiTouchable","transform",1,"widget"],["widget",""],["size","m",1,"icon",3,"avatarUrl","rounded"],[1,"title"],[3,"content","linesLimit"],["class","location",3,"content","linesLimit",4,"ngIf"],[1,"metric"],["class","tui-text_body-l-2",3,"scale","currentValue","mode",4,"ngIf"],[1,"location",3,"content","linesLimit"],[1,"tui-text_body-l-2",3,"scale","currentValue","mode"]],template:function(n,r){1&n&&(t.YNc(0,B,9,9,"tui-island",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,r.context$))},directives:[y.O5,A.h,S.u,U.J,v.by,m.z],pipes:[y.Ov],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f;display:flex;align-items:center;padding:0 .2rem}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;justify-content:flex-end;margin-right:.5rem}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin:.5rem;pointer-events:none}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font:var(--tui-font-text-s)}@keyframes shake{0%,to,25%{transform:translate(5px)}33%{transform:rotate(1deg)}66%{transform:rotate(-1deg)}75%{transform:translate(-5px)}}[_nghost-%COMP%]   .shake[_ngcontent-%COMP%]{animation:shake .15s linear 2}"],changeDetection:0}),i})();const F=["id",""];let Y=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["z-wave-device-widget","id",""]],inputs:{id:"id"},attrs:F,decls:1,vars:1,consts:[[1,"device-widget",3,"id"]],template:function(n,r){1&n&&t._UZ(0,"z-wave-base-widget",0),2&n&&t.Q6J("id",r.id)},directives:[R],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),i})();var J=e(313);function Z(i,c){1&i&&t._UZ(0,"z-wave-device-widget",5),2&i&&t.Q6J("id",c.$implicit)}function b(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",3),t.YNc(2,Z,1,1,"z-wave-device-widget",4),t.qZA(),t.BQk()),2&i){const n=t.oxw().ngIf;t.xp6(2),t.Q6J("cdkVirtualForOf",n)("cdkVirtualForTemplateCacheSize",0)}}function Q(i,c){if(1&i&&(t.ynx(0),t.YNc(1,b,3,2,"ng-container",0),t.BQk()),2&i){const n=c.ngIf;t.oxw();const r=t.MAs(5);t.xp6(1),t.Q6J("ngIf",n.length)("ngIfElse",r)}}function w(i,c){1&i&&t._UZ(0,"z-wave-load-screen")}function K(i,c){1&i&&t.Hsn(0)}class W{}W.\u0275fac=function(c){return new(c||W)},W.\u0275cmp=t.Xpm({type:W,selectors:[["z-wave-device-list"]],features:[t._Bn([u.z])],ngContentSelectors:["*"],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["placeHolder",""],["itemSize","69","tuiScrollable","","appendOnly","","zWaveRestorePosition","",1,"device-list","tui-zero-scrollbar"],[3,"id",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[3,"id"]],template:function(c,n){if(1&c&&(t.F$t(),t.YNc(0,Q,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,w,1,0,"ng-template",null,1,t.W1O),t.YNc(4,K,1,0,"ng-template",null,2,t.W1O)),2&c){const r=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.ids$))("ngIfElse",r)}},directives:[y.O5,s.N7,s.xd,P.Rm,M.y,s.x0,Y,J.K],pipes:[y.Ov],styles:["[_nghost-%COMP%]   .device-list[_ngcontent-%COMP%]{height:calc(100vh - 2 * var(--header-heigth))}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}  .cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{width:100%}"],changeDetection:0}),(0,a.gn)([(0,o.Ph)(g.N.showDevice),(0,a.w6)("design:type",l.y)],W.prototype,"ids$",void 0)},7005:(L,p,e)=>{e.d(p,{y:()=>M});var a=e(3673),o=e(9300),g=e(590),l=e(8505),u=e(9606),t=e(7176),y=e(8035),s=e(5e3),P=e(977);let M=(()=>{class h{constructor(d,E,f){this.viewport=d,this.router=E,this.store=f,this.router.events.pipe((0,o.h)(_=>_ instanceof a.OD),(0,g.P)(),(0,l.b)(()=>{this.store.dispatch(new t.fj(E.url,null==d?void 0:d.measureScrollOffset("top")))})).subscribe()}ngAfterViewInit(){setTimeout(()=>{var d;null===(d=this.viewport)||void 0===d||d.scrollTo({top:this.store.selectSnapshot(y.f.position(this.router.url))}),this.viewport.checkViewportSize()},0)}}return h.\u0275fac=function(d){return new(d||h)(s.Y36(P.N7),s.Y36(a.F0),s.Y36(u.yh))},h.\u0275dir=s.lG2({type:h,selectors:[["","zWaveRestorePosition",""]]}),h})()},2824:(L,p,e)=>{e.d(p,{T:()=>g});var a=e(9808),o=e(5e3);let g=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[[a.ez]]}),l})()},313:(L,p,e)=>{e.d(p,{K:()=>o});var a=e(5e3);let o=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=a.Xpm({type:g,selectors:[["z-wave-load-screen"]],decls:4,vars:0,template:function(u,t){1&u&&(a._UZ(0,"div"),a._UZ(1,"div"),a._UZ(2,"div"),a._UZ(3,"div"))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;height:100%;padding:2rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{z-index:999;top:33px;width:.7rem;height:.7rem;border-radius:50%;background:var(--tui-primary);animation-timing-function:cubic-bezier(0,1,1,0)}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:lds-ellipsis1 .6s infinite}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:lds-ellipsis2 .6s infinite;margin-right:.7rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:lds-ellipsis2 .6s infinite}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:lds-ellipsis3 .6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(-.7rem)}to{transform:translate(.7rem)}}"]}),g})()},1736:(L,p,e)=>{e.d(p,{y:()=>g});var a=e(9808),o=e(5e3);let g=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[[a.ez]]}),l})()},9518:(L,p,e)=>{e.d(p,{u:()=>A,W:()=>U});var a=e(8404),o=e(5e3),l=e(3679),u=e(8689),t=e(7776),y=e(8923),s=e(5374),P=e(102),M=e(8505),h=e(4004),D=e(3900),d=e(9300),E=e(5698),f=e(2722);const _={transform:"scale(0.95)",opacity:"0.6",background:"rgba(146, 153, 162, 0.12)"};let A=(()=>{let v=class{constructor(m,T,{nativeElement:z},x,I){if(this.tuiTouchable="",!T)return;const C=m?m.nativeElement:z;(0,l.eh)(C,"touchstart",{passive:!0}).pipe((0,M.b)(()=>{this.onTouchStart(x,C)}),(0,h.U)(({touches:B})=>B[B.length-1].identifier),(0,D.w)(B=>(0,P.S)((0,l.eh)(C,"touchmove",{passive:!0}).pipe((0,d.h)(({touches:R})=>this.hasTouchLeft(C,R,B))),(0,l.eh)(C,"touchend")).pipe((0,E.q)(1))),(0,f.R)(I)).subscribe(()=>{x.removeStyle(C,"transform"),x.removeStyle(C,"opacity"),x.removeStyle(C,"background")})}get style(){return this.tuiTouchable||"transform"}hasTouchLeft(m,T,z){const{ownerDocument:x}=m,I=function g(v,S){for(let m=0;m<v.length;m++){const{identifier:T}=v[m];if(T===S)return m}return-1}(T,z);if(!x||-1===I)return!0;const{clientX:C,clientY:B}=T[I];return!m.contains(x.elementFromPoint(C,B))}onTouchStart(m,T){"transform"!==this.style?m.removeStyle(T,"transition"):m.setStyle(T,"transition","transform 0.2s"),m.setStyle(T,this.style,_[this.style])}};return v.\u0275fac=function(m){return new(m||v)(o.Y36(s.zP,8),o.Y36(u.FA),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(t.a3))},v.\u0275dir=o.lG2({type:v,selectors:[["","tuiTouchable",""]],inputs:{tuiTouchable:"tuiTouchable"},features:[o._Bn([t.a3])]}),(0,a.gn)([(0,o.IIB)(),(0,y.TH)()],v.prototype,"tuiTouchable",void 0),v=(0,a.gn)([(0,a.fM)(0,(0,o.FiY)()),(0,a.fM)(0,(0,o.tBr)(s.zP)),(0,a.fM)(1,(0,o.tBr)(u.FA)),(0,a.fM)(2,(0,o.tBr)(o.SBq)),(0,a.fM)(3,(0,o.tBr)(o.Qsj)),(0,a.fM)(4,(0,o.tBr)(t.a3))],v),v})(),U=(()=>{let v=class{};return v.\u0275fac=function(m){return new(m||v)},v.\u0275mod=o.oAB({type:v}),v.\u0275inj=o.cJS({}),v})()},102:(L,p,e)=>{e.d(p,{S:()=>t});var a=e(9751),o=e(8421);const{isArray:g}=Array;var u=e(5403);function t(...s){return 1===(s=function l(s){return 1===s.length&&g(s[0])?s[0]:s}(s)).length?(0,o.Xf)(s[0]):new a.y(function y(s){return P=>{let M=[];for(let h=0;M&&!P.closed&&h<s.length;h++)M.push((0,o.Xf)(s[h]).subscribe(new u.Q(P,D=>{if(M){for(let d=0;d<M.length;d++)d!==h&&M[d].unsubscribe();M=null}P.next(D)})))}}(s))}}}]);