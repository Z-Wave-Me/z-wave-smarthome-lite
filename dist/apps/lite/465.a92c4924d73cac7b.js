"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[465],{5465:(oo,B,i)=>{i.r(B),i.d(B,{RoomsModule:()=>kt});var c=i(6895),d=i(1644),g=i(9606),v=i(7759),t=i(4650),U=i(655),K=i(9751),b=i(1247),z=i(8106),k=i(2392),J=i(7068),N=i(1195),y=i(7154),q=i(4570),C=i(3900),tt=i(8678),R=i(4004),_=i(590),x=i(430),S=i(5601),T=i(7776),M=i(7414),h=i(3679),ot=i(5753),Q=i(515),$=i(102),nt=i(5963),I=i(9300),O=i(2722),et=i(5577),A=i(9718),it=i(5698),D=i(8505),E=i(6304);const L="tuiRippleOff",H=new t.OlP("[TUI_RIPPLE_START]: Stream of ripple elements to add"),X=new t.OlP("[TUI_RIPPLE_END]: Stream of ripple elements to remove"),at=[T.a3,{provide:H,deps:[M.Cy,M.FA,t.SBq,t.Qsj],useFactory:(o,e,{nativeElement:n},s)=>e||!o?Q.E:(0,h.mL)(n,"touchstart").pipe((0,R.U)(({touches:a})=>{const{clientX:r,clientY:m}=a[a.length-1],{width:P,height:f,top:F,left:l}=n.getBoundingClientRect(),p=Math.sqrt(P*P+f*f),w=2*p,qt=r-l-p,to=m-F-p,Z=s.createElement("div");return s.addClass(Z,"tui-ripple"),s.setAttribute(Z,"style",`\n                        width: ${w}px;\n                        height: ${w}px;\n                        left: ${qt}px;\n                        top: ${to}px;\n                        animation-name: tuiRippleOn;\n                    `),Z}))},{provide:X,deps:[M.Cy,M.FA,t.SBq,T.a3],useFactory:(o,e,{nativeElement:n},s)=>e||!o?Q.E:(0,h.mL)(n,"animationend").pipe((0,I.h)(({animationName:a})=>a===L),(0,R.U)(({target:a})=>a),(0,I.h)(ot.Pc),(0,O.R)(s))}];let rt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:0,vars:0,template:function(n,s){},styles:["@keyframes tuiRippleOn{0%{transform:scale(0);opacity:.12}to{transform:none;opacity:.12}}@keyframes tuiRippleOff{0%{transform:none;opacity:.12}to{transform:none;opacity:0}}*[tuiRipple]{position:relative;overflow:hidden}.tui-ripple{position:absolute;z-index:100;border-radius:100%;background:currentColor;transform:scale(0);animation-duration:.45s;animation-fill-mode:forwards;pointer-events:none}\n"],encapsulation:2}),o})(),j=(()=>{class o{constructor({nativeElement:n},s,a,r,m,P){s.addComponent(rt);const f=(0,h.mL)(n,"touchend"),F=(0,h.mL)(n,"touchmove");P.subscribe(l=>{a.removeChild(n,l)}),m.pipe((0,et.z)(l=>{const p=(0,h.mL)(l,"animationend");return(0,$.S)((0,nt.H)(100).pipe((0,A.h)(!1)),f.pipe((0,A.h)(!0))).pipe((0,it.q)(1),(0,O.R)(F),(0,D.b)(()=>{a.setStyle(l,"background",this.tuiRipple||null),a.appendChild(n,l)}),(0,C.w)(w=>w?p:(0,$.S)(f.pipe((0,E.c)(p)),p.pipe((0,E.c)(f)))),(0,A.h)(l))}),(0,O.R)(r)).subscribe(l=>{a.setStyle(l,"animationName",L)})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.SBq),t.Y36(T.gH),t.Y36(t.Qsj),t.Y36(T.a3,2),t.Y36(H),t.Y36(X))},o.\u0275dir=t.lG2({type:o,selectors:[["","tuiRipple",""]],inputs:{tuiRipple:"tuiRipple"},features:[t._Bn(at)]}),o})(),lt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})();var W=i(9518),Y=i(3868),V=i(6246);const dt=["id",""];function mt(o,e){if(1&o&&(t.TgZ(0,"div",1),t._UZ(1,"tui-avatar",2),t.TgZ(2,"div",3)(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA()()()),2&o){const n=e.ngIf;t.Q6J("title",n.title+": "+n.level+" "+n.scaleTitle),t.xp6(1),t.Q6J("avatarUrl",n.iconPath)("rounded",!0),t.xp6(3),t.Oqu(n.level),t.xp6(2),t.hij(" ",n.scaleTitle,"")}}let pt=(()=>{class o{constructor(n){this.store=n,this.device$=n.select(s=>s.devices.entities[this.id]).pipe((0,I.h)(s=>!!s),(0,R.U)(({metrics:s,iconPath:a})=>({...s,iconPath:a})))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-main-sensor-widget","id",""]],inputs:{id:"id"},attrs:dt,decls:2,vars:3,consts:[["class","sensor",3,"title",4,"ngIf"],[1,"sensor",3,"title"],[1,"tui-space_right-2",3,"avatarUrl","rounded"],[1,"tui-text_body-l-2"]],template:function(n,s){1&n&&(t.YNc(0,mt,7,5,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,s.device$))},dependencies:[c.O5,V.JP,c.Ov],styles:['[_nghost-%COMP%]   .sensor[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;z-index:1;padding:.5rem;border-radius:1rem;overflow:hidden}[_nghost-%COMP%]   .sensor[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;background-color:var(--tui-base-02);opacity:.7;left:0;top:0;width:100%;height:100%}'],changeDetection:0}),o})();const gt=["id",""];function ut(o,e){if(1&o&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).ngIf;t.xp6(1),t.hij("[",n.devices?n.devices.length:0,"]")}}function ft(o,e){1&o&&t._UZ(0,"z-wave-main-sensor-widget",11),2&o&&t.Q6J("id",e.$implicit)}const vt=function(o){return{inactive:o}},ht=function(o){return{"background-image":o}};function yt(o,e){if(1&o&&(t.TgZ(0,"tui-island",3)(1,"div",4),t.YNc(2,ut,2,1,"span",5),t.TgZ(3,"span",6),t._uU(4),t.qZA(),t._UZ(5,"fa-icon",7),t.qZA(),t.TgZ(6,"div",8),t.YNc(7,ft,1,1,"z-wave-main-sensor-widget",9),t.qZA()()),2&o){const n=t.oxw().ngIf,s=t.oxw(2);t.Q6J("ngClass",t.VKq(7,vt,!n.devices)),t.xp6(2),t.Q6J("ngIf",n.devices),t.xp6(2),t.Oqu(null==n.room?null:n.room.title),t.xp6(1),t.Q6J("icon",s.faSort),t.xp6(1),t.Q6J("ngStyle",t.VKq(9,ht,"url("+(null==n.room?null:n.room.imgSrc)+")")),t.xp6(1),t.Q6J("ngForOf",null==n.room?null:n.room.main_sensors)("ngForTrackBy",s.trackIndex)}}function Ct(o,e){if(1&o&&(t.ynx(0),t.YNc(1,yt,8,11,"tui-island",2),t.BQk()),2&o){const n=e.ngIf;t.xp6(1),t.Q6J("ngIf",(null==n.room?null:n.room.id)||(null==n.devices?null:n.devices.length))}}const Rt=function(o,e){return{room:o,devices:e}};function xt(o,e){if(1&o&&(t.ynx(0),t.YNc(1,Ct,2,1,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.WLB(5,Rt,t.lcZ(2,1,n.room$),t.lcZ(3,3,n.devices$)))}}let Tt=(()=>{class o{constructor(n,s,a){this.store=n,this.router=s,this.route=a,this.faSort=tt.CmM,this.room$=n.select(r=>r.locations.entities[this.id]),this.devices$=n.select(r=>r.devices.locations[this.id])}press(){this.id&&this.router.navigate(["config",this.id],{relativeTo:this.route})}tap(){this.devices$.pipe((0,R.U)(n=>n?.length),(0,C.w)(n=>this.router.navigate(n?[this.id]:["config",this.id],{relativeTo:this.route})),(0,_.P)()).subscribe()}trackIndex(n){return n}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.yh),t.Y36(d.F0),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-room-widget","id",""]],hostBindings:function(n,s){1&n&&t.NdJ("press",function(){return s.press()})("tap",function(){return s.tap()})},inputs:{id:"id"},attrs:gt,decls:1,vars:0,consts:[[4,"transloco"],[4,"ngIf"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)","class","widget",3,"ngClass",4,"ngIf"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)",1,"widget",3,"ngClass"],[1,"tui-island__title","title"],["class","tui-space_right-1","style","color: var(--tui-text-02)",4,"ngIf"],[1,"room"],[1,"tui-space_left-5",3,"icon"],[1,"background",3,"ngStyle"],[3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tui-space_right-1",2,"color","var(--tui-text-02)"],[3,"id"]],template:function(n,s){1&n&&t.YNc(0,xt,4,8,"ng-container",0)},dependencies:[c.mk,c.sg,c.O5,c.PC,x.KI,S.h,j,W.u,Y.BN,pt,c.Ov],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{padding:.75rem 0 0;margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:0 1rem;display:flex}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:100%;background-position:center;aspect-ratio:1.85;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-content:center;gap:1rem}[_nghost-%COMP%]   .inactive[_ngcontent-%COMP%]{filter:contrast(.4)}"],changeDetection:0}),o})();var Mt=i(1884),Ot=i(1520),Pt=i(8507),wt=i(2076),zt=i(8526),St=i(5428);function It(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"fa-icon",5),t._uU(2),t.BQk()),2&o){const n=t.oxw().$implicit,s=t.oxw();t.xp6(1),t.Q6J("icon",s.faPlus),t.xp6(1),t.hij(" ",n("lb_add_room")," ")}}function At(o,e){1&o&&t._UZ(0,"z-wave-load-screen")}function Wt(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"tui-island",1)(2,"div",2),t.YNc(3,It,3,2,"ng-container",3),t.qZA(),t.YNc(4,At,1,0,"ng-template",null,4,t.W1O),t.qZA(),t.BQk()),2&o){const n=t.MAs(5),s=t.oxw();t.xp6(3),t.Q6J("ngIf",s.ready)("ngIfElse",n)}}let Yt=(()=>{class o{constructor(n,s,a,r,m){this.router=n,this.route=s,this.store=a,this.tuiNotification=r,this.translocoService=m,this.faPlus=zt.r8p,this.ready=!0}doubleTap(){if(this.ready){this.ready=!1,this.store.select(({locations:{ids:s}})=>s).pipe((0,Mt.x)(),(0,Ot.G)(),(0,_.P)(),(0,C.w)(([s,a])=>{const[r]=(a??[]).filter(m=>!(s??[]).includes(m));return r?(0,wt.D)(this.router.navigate(["config",r],{relativeTo:this.route})).pipe((0,C.w)(()=>this.tuiNotification.open(this.translocoService.translate("roomCreateSuccess"),{status:"success"}))):this.tuiNotification.open(this.translocoService.translate("roomCreateError"),{status:"error"})})).subscribe({complete:()=>this.ready=!0});const n=this.translocoService.translate("newRoom");this.store.dispatch(new Pt.At(n))}}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(g.yh),t.Y36(St.J9),t.Y36(x.Vn))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-add-room-widget"]],hostBindings:function(n,s){1&n&&t.NdJ("press",function(){return s.doubleTap()})("doubletap",function(){return s.doubleTap()})},decls:1,vars:0,consts:[[4,"transloco"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)",1,"widget"],[1,"tui-text_h5","title"],[4,"ngIf","ngIfElse"],["loading",""],["size","2x",1,"icon","tui-space_right-4",3,"icon"]],template:function(n,s){1&n&&t.YNc(0,Wt,6,2,"ng-container",0)},dependencies:[c.O5,x.KI,J.K,S.h,j,W.u,Y.BN],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f;background-image:url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='10' ry='10' stroke='lightseagreen' stroke-width='8' stroke-dasharray='36 27' stroke-dashoffset='37' stroke-linecap='round'/%3e%3c/svg%3e\");aspect-ratio:1.85;align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(--tui-primary)}"],changeDetection:0}),o})();function Ft(o,e){1&o&&t._UZ(0,"z-wave-load-screen")}function Zt(o,e){1&o&&t._UZ(0,"z-wave-room-widget",6),2&o&&t.Q6J("id",e.$implicit)}function Bt(o,e){1&o&&t._UZ(0,"z-wave-add-room-widget")}function Ut(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",2),t.YNc(2,Zt,1,1,"z-wave-room-widget",3),t.YNc(3,Bt,1,0,"z-wave-add-room-widget",4),t._UZ(4,"div",5),t.qZA(),t.BQk()),2&o){const n=e.ngIf;t.xp6(2),t.Q6J("cdkVirtualForOf",n)("cdkVirtualForTemplateCacheSize",0),t.xp6(1),t.Q6J("zWaveSecure","addRoom")}}class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["z-wave-rooms-gallery"]],features:[t._Bn([z.z])],decls:4,vars:4,consts:[["loadingScreen",""],[4,"ngIf","ngIfElse"],["itemSize","200","tuiScrollable","","appendOnly","","zWaveRestorePosition","",1,"rooms","tui-container_adaptive","tui-zero-scrollbar"],[3,"id",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[4,"zWaveSecure"],[1,"filler"],[3,"id"]],template:function(e,n){if(1&e&&(t.YNc(0,Ft,1,0,"ng-template",null,0,t.W1O),t.YNc(2,Ut,5,3,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.ids$))("ngIfElse",s)}},dependencies:[c.O5,k.M,J.K,N.Rm,y.xd,y.x0,y.N7,q.y,Tt,Yt,c.Ov],styles:["[_nghost-%COMP%]   .rooms[_ngcontent-%COMP%]{height:calc(100vh - 2 * var(--header-heigth))}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{width:100%;height:50vh}"],changeDetection:0}),(0,U.gn)([(0,g.Ph)(b.f.ids),(0,U.w6)("design:type",K.y)],u.prototype,"ids$",void 0);let Jt=(()=>{class o{constructor(n){this.store=n,this.store.dispatch(new v.X4),this.store.dispatch(new v.Mc),this.store.dispatch(new v.uh("rooms"))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-rooms"]],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"z-wave-rooms-gallery")},dependencies:[u],changeDetection:0}),o})();var Nt=i(4432);const _t=[{path:"",pathMatch:"full",component:Jt},{path:":id",component:(()=>{class o{constructor(n,s,a){this.activatedRoute=n,this.store=s,this.destroy$=a,this.store.dispatch(new v.uh("rooms")),n.url.pipe((0,O.R)(a),(0,D.b)(([{path:r}])=>{this.store.dispatch(new v.X4({location:+r}))})).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.gz),t.Y36(g.yh),t.Y36(z.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-room"]],features:[t._Bn([z.z])],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"z-wave-device-list")},dependencies:[Nt.k]}),o})()}];let Qt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(_t),d.Bz]}),o})();var $t=i(6651),Dt=i(4151),Et=i(6938),G=i(4006),Lt=i(6598),Ht=i(1786);let Xt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez]}),o})();var jt=i(2048),Vt=i(8917),Gt=i(3861),Kt=i(1570),bt=i(4983);let kt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,Qt,x.y4,$t.$,Dt.T,Et.y,G.UX,Lt.n,Ht._,Xt,S.y,lt,N.Jy,W.W,V.Jm,Y.uH,Kt.I,jt.Jy,Vt.zX,G.u5,Gt.pc,y.Cl,bt.T]}),o})()}}]);