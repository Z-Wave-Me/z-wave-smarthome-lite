"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[566],{3566:(io,Q,e)=>{e.r(Q),e.d(Q,{RoomsModule:()=>oo});var c=e(9808),m=e(3673),u=e(9606),y=e(2275),t=e(5e3),$=e(655),k=e(9751),q=e(7147),S=e(2662),D=e(313),R=e(977),E=e(1195),tt=e(7005),x=e(3900),ot=e(8678),M=e(4004),_=e(590),T=e(9177),B=e(5601),Z=e(9518),d=e(8404),f=e(7776),O=e(8689),C=e(3679),nt=e(5753),j=e(515),H=e(102),et=e(5963),A=e(9300),P=e(2722),it=e(5577),I=e(9718),st=e(5698),L=e(8505),X=e(6304);const V="tuiRippleOn",Y="tuiRippleOff",F=new t.OlP("Stream of ripple elements to add"),W=new t.OlP("Stream of ripple elements to remove"),at=[f.a3,{provide:F,deps:[O.Cy,O.FA,t.SBq,t.Qsj],useFactory:function rt(o,i,{nativeElement:n},s){return i||!o?j.E:(0,C.eh)(n,"touchstart").pipe((0,M.U)(({touches:a})=>{const{clientX:r,clientY:p}=a[a.length-1],{width:w,height:h,top:J,left:l}=n.getBoundingClientRect(),g=Math.sqrt(w*w+h*h),z=2*g,no=r-l-g,eo=p-J-g,N=s.createElement("div");return s.addClass(N,"tui-ripple"),s.setAttribute(N,"style",`\n                        width: ${z}px;\n                        height: ${z}px;\n                        left: ${no}px;\n                        top: ${eo}px;\n                        animation-name: ${V};\n                    `),N}))}},{provide:W,deps:[O.Cy,O.FA,t.SBq,f.a3],useFactory:function ct(o,i,{nativeElement:n},s){return i||!o?j.E:(0,C.eh)(n,"animationend").pipe((0,A.h)(({animationName:a})=>a===Y),(0,M.U)(({target:a})=>a),(0,A.h)(nt.EN),(0,P.R)(s))}}],dt=`\n@keyframes ${V} {\n    from {\n        transform: scale(0);\n        opacity: 0.12;\n    }\n\n    to {\n        transform: none;\n        opacity: 0.12;\n    }\n}\n\n@keyframes ${Y} {\n    from {\n        transform: none;\n        opacity: 0.12;\n    }\n\n    to {\n        transform: none;\n        opacity: 0;\n    }\n}\n\n*[tuiRipple] {\n    position: relative;\n    overflow: hidden;\n}\n\n.tui-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background: currentColor;\n    z-index: 100;\n    transform: scale(0);\n    animation-duration: 450ms;\n    animation-fill-mode: forwards;\n    pointer-events: none;\n}\n`;let G=(()=>{let o=class{constructor({nativeElement:n},s,a,r,p,w){s.addStyle(dt,"TuiRippleDirective");const h=(0,C.eh)(n,"touchend"),J=(0,C.eh)(n,"touchmove");w.subscribe(l=>{a.removeChild(n,l)}),p.pipe((0,it.z)(l=>{const g=(0,C.eh)(l,"animationend");return(0,H.S)((0,et.H)(100).pipe((0,I.h)(!1)),h.pipe((0,I.h)(!0))).pipe((0,st.q)(1),(0,P.R)(J),(0,L.b)(()=>{a.setStyle(l,"background",this.tuiRipple||null),a.appendChild(n,l)}),(0,x.w)(z=>z?g:(0,H.S)(h.pipe((0,X.c)(g)),g.pipe((0,X.c)(h)))),(0,I.h)(l))}),(0,P.R)(r)).subscribe(l=>{a.setStyle(l,"animationName",Y)})}};return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.SBq),t.Y36(f.gH),t.Y36(t.Qsj),t.Y36(f.a3),t.Y36(F),t.Y36(W))},o.\u0275dir=t.lG2({type:o,selectors:[["","tuiRipple",""]],inputs:{tuiRipple:"tuiRipple"},features:[t._Bn(at)]}),(0,d.gn)([(0,t.IIB)()],o.prototype,"tuiRipple",void 0),o=(0,d.gn)([(0,d.fM)(0,(0,t.tBr)(t.SBq)),(0,d.fM)(1,(0,t.tBr)(f.gH)),(0,d.fM)(2,(0,t.tBr)(t.Qsj)),(0,d.fM)(3,(0,t.tBr)(f.a3)),(0,d.fM)(4,(0,t.tBr)(F)),(0,d.fM)(5,(0,t.tBr)(W))],o),o})(),mt=(()=>{let o=class{};return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})();var U=e(9444),K=e(6246);const pt=["id",""];function gt(o,i){if(1&o&&(t.TgZ(0,"div",1),t._UZ(1,"tui-avatar",2),t.TgZ(2,"div",3),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&o){const n=i.ngIf;t.Q6J("title",n.title+": "+n.level+" "+n.scaleTitle),t.xp6(1),t.Q6J("avatarUrl",n.iconPath)("rounded",!0),t.xp6(3),t.Oqu(n.level),t.xp6(2),t.hij(" ",n.scaleTitle,"")}}let ut=(()=>{class o{constructor(n){this.store=n,this.device$=n.select(s=>s.devices.entities[this.id]).pipe((0,A.h)(s=>!!s),(0,M.U)(({metrics:s,iconPath:a})=>Object.assign(Object.assign({},s),{iconPath:a})))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(u.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-main-sensor-widget","id",""]],inputs:{id:"id"},attrs:pt,decls:2,vars:3,consts:[["class","sensor",3,"title",4,"ngIf"],[1,"sensor",3,"title"],[1,"tui-space_right-2",3,"avatarUrl","rounded"],[1,"tui-text_body-l-2"]],template:function(n,s){1&n&&(t.YNc(0,gt,7,5,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,s.device$))},directives:[c.O5,K.J],pipes:[c.Ov],styles:['[_nghost-%COMP%]   .sensor[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;z-index:1;padding:.5rem;border-radius:1rem;overflow:hidden}[_nghost-%COMP%]   .sensor[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;background-color:var(--tui-base-02);opacity:.7;left:0;top:0;width:100%;height:100%}'],changeDetection:0}),o})();const ft=["id",""];function vt(o,i){if(1&o&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).ngIf;t.xp6(1),t.hij("[",n.devices?n.devices.length:0,"]")}}function ht(o,i){1&o&&t._UZ(0,"z-wave-main-sensor-widget",11),2&o&&t.Q6J("id",i.$implicit)}const yt=function(o){return{inactive:o}},Ct=function(o){return{"background-image":o}};function Rt(o,i){if(1&o&&(t.TgZ(0,"tui-island",3),t.TgZ(1,"div",4),t.YNc(2,vt,2,1,"span",5),t.TgZ(3,"span",6),t._uU(4),t.qZA(),t._UZ(5,"fa-icon",7),t.qZA(),t.TgZ(6,"div",8),t.YNc(7,ht,1,1,"z-wave-main-sensor-widget",9),t.qZA(),t.qZA()),2&o){const n=t.oxw().ngIf,s=t.oxw(2);t.Q6J("ngClass",t.VKq(7,yt,!n.devices)),t.xp6(2),t.Q6J("ngIf",n.devices),t.xp6(2),t.Oqu(null==n.room?null:n.room.title),t.xp6(1),t.Q6J("icon",s.faSort),t.xp6(1),t.Q6J("ngStyle",t.VKq(9,Ct,"url("+(null==n.room?null:n.room.imgSrc)+")")),t.xp6(1),t.Q6J("ngForOf",null==n.room?null:n.room.main_sensors)("ngForTrackBy",s.trackIndex)}}function xt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Rt,8,11,"tui-island",2),t.BQk()),2&o){const n=i.ngIf;t.xp6(1),t.Q6J("ngIf",(null==n.room?null:n.room.id)||(null==n.devices?null:n.devices.length))}}const Mt=function(o,i){return{room:o,devices:i}};function Tt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,xt,2,1,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.WLB(5,Mt,t.lcZ(2,1,n.room$),t.lcZ(3,3,n.devices$)))}}let Ot=(()=>{class o{constructor(n,s,a){this.store=n,this.router=s,this.route=a,this.faSort=ot.CmM,this.room$=n.select(r=>r.locations.entities[this.id]),this.devices$=n.select(r=>r.devices.locations[this.id])}press(){this.id&&this.router.navigate(["config",this.id],{relativeTo:this.route})}tap(){this.devices$.pipe((0,M.U)(n=>null==n?void 0:n.length),(0,x.w)(n=>this.router.navigate(n?[this.id]:["config",this.id],{relativeTo:this.route})),(0,_.P)()).subscribe()}trackIndex(n){return n}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(u.yh),t.Y36(m.F0),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-room-widget","id",""]],hostBindings:function(n,s){1&n&&t.NdJ("press",function(){return s.press()})("tap",function(){return s.tap()})},inputs:{id:"id"},attrs:ft,decls:1,vars:0,consts:[[4,"transloco"],[4,"ngIf"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)","class","widget",3,"ngClass",4,"ngIf"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)",1,"widget",3,"ngClass"],[1,"tui-island__title","title"],["class","tui-space_right-1","style","color: var(--tui-text-02)",4,"ngIf"],[1,"room"],[1,"tui-space_left-5",3,"icon"],[1,"background",3,"ngStyle"],[3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tui-space_right-1",2,"color","var(--tui-text-02)"],[3,"id"]],template:function(n,s){1&n&&t.YNc(0,Tt,4,8,"ng-container",0)},directives:[T.KI,c.O5,B.h,Z.u,G,c.mk,U.BN,c.PC,c.sg,ut],pipes:[c.Ov],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{padding:.75rem 0 0;margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:0 1rem;display:flex}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:100%;background-position:center;aspect-ratio:1.85;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-content:center;gap:1rem}[_nghost-%COMP%]   .inactive[_ngcontent-%COMP%]{filter:contrast(.4)}"],changeDetection:0}),o})();var Pt=e(2178),wt=e(1884),zt=e(1520),St=e(1743),Bt=e(2076),Zt=e(8526),At=e(7047);function It(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"fa-icon",5),t._uU(2),t.BQk()),2&o){const n=t.oxw().$implicit,s=t.oxw();t.xp6(1),t.Q6J("icon",s.faPlus),t.xp6(1),t.hij(" ",n("lb_add_room")," ")}}function Yt(o,i){1&o&&t._UZ(0,"z-wave-load-screen")}function Ft(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"tui-island",1),t.TgZ(2,"div",2),t.YNc(3,It,3,2,"ng-container",3),t.qZA(),t.YNc(4,Yt,1,0,"ng-template",null,4,t.W1O),t.qZA(),t.BQk()),2&o){const n=t.MAs(5),s=t.oxw();t.xp6(3),t.Q6J("ngIf",s.ready)("ngIfElse",n)}}let Wt=(()=>{class o{constructor(n,s,a,r,p){this.router=n,this.route=s,this.store=a,this.tuiNotification=r,this.translocoService=p,this.faPlus=Zt.r8p,this.ready=!0}doubleTap(){if(this.ready){this.ready=!1,this.store.select(({locations:{ids:s}})=>s).pipe((0,wt.x)(),(0,zt.G)(),(0,_.P)(),(0,x.w)(([s,a])=>{const[r]=(null!=a?a:[]).filter(p=>!(null!=s?s:[]).includes(p));return r?(0,Bt.D)(this.router.navigate(["config",r],{relativeTo:this.route})).pipe((0,x.w)(()=>this.tuiNotification.show(this.translocoService.translate("roomCreateSuccess"),{status:"success"}))):this.tuiNotification.show(this.translocoService.translate("roomCreateError"),{status:"error"})})).subscribe({complete:()=>this.ready=!0});const n=this.translocoService.translate("newRoom");this.store.dispatch(new St.At(n))}}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(u.yh),t.Y36(At.$F),t.Y36(T.Vn))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-add-room-widget"]],hostBindings:function(n,s){1&n&&t.NdJ("press",function(){return s.doubleTap()})("doubletap",function(){return s.doubleTap()})},decls:1,vars:0,consts:[[4,"transloco"],["tuiTouchable","transform","tuiRipple","radial-gradient(circle, #5c0067 0%, #00d4ff 100%)",1,"widget"],[1,"tui-text_h5","title"],[4,"ngIf","ngIfElse"],["loading",""],["size","2x",1,"icon","tui-space_right-4",3,"icon"]],template:function(n,s){1&n&&t.YNc(0,Ft,6,2,"ng-container",0)},directives:[T.KI,B.h,Z.u,G,c.O5,U.BN,D.K],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f;background-image:url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='10' ry='10' stroke='lightseagreen' stroke-width='8' stroke-dasharray='36 27' stroke-dashoffset='37' stroke-linecap='round'/%3e%3c/svg%3e\");aspect-ratio:1.85;align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(--tui-primary)}"],changeDetection:0}),o})();function Ut(o,i){1&o&&t._UZ(0,"z-wave-load-screen")}function Jt(o,i){1&o&&t._UZ(0,"z-wave-room-widget",6),2&o&&t.Q6J("id",i.$implicit)}function Nt(o,i){1&o&&t._UZ(0,"z-wave-add-room-widget")}function Qt(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",2),t.YNc(2,Jt,1,1,"z-wave-room-widget",3),t.YNc(3,Nt,1,0,"z-wave-add-room-widget",4),t._UZ(4,"div",5),t.qZA(),t.BQk()),2&o){const n=i.ngIf;t.xp6(2),t.Q6J("cdkVirtualForOf",n)("cdkVirtualForTemplateCacheSize",0),t.xp6(1),t.Q6J("zWaveSecure","addRoom")}}class v{}v.\u0275fac=function(i){return new(i||v)},v.\u0275cmp=t.Xpm({type:v,selectors:[["z-wave-rooms-gallery"]],features:[t._Bn([S.z])],decls:4,vars:4,consts:[["loadingScreen",""],[4,"ngIf","ngIfElse"],["itemSize","200","tuiScrollable","","appendOnly","","zWaveRestorePosition","",1,"rooms","tui-container_adaptive","tui-zero-scrollbar"],[3,"id",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[4,"zWaveSecure"],[1,"filler"],[3,"id"]],template:function(i,n){if(1&i&&(t.YNc(0,Ut,1,0,"ng-template",null,0,t.W1O),t.YNc(2,Qt,5,3,"ng-container",1),t.ALo(3,"async")),2&i){const s=t.MAs(1);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.ids$))("ngIfElse",s)}},directives:[D.K,c.O5,R.N7,R.xd,E.Rm,tt.y,R.x0,Ot,Pt.M,Wt],pipes:[c.Ov],styles:["[_nghost-%COMP%]   .rooms[_ngcontent-%COMP%]{height:calc(100vh - 2 * var(--header-heigth))}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{width:100%;height:50vh}"],changeDetection:0}),(0,$.gn)([(0,u.Ph)(q.f.ids),(0,$.w6)("design:type",k.y)],v.prototype,"ids$",void 0);let $t=(()=>{class o{constructor(n){this.store=n,this.store.dispatch(new y.X4),this.store.dispatch(new y.Mc),this.store.dispatch(new y.uh("rooms"))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(u.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-rooms"]],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"z-wave-rooms-gallery")},directives:[v],styles:[""],changeDetection:0}),o})();var Dt=e(7426);const Et=[{path:"",pathMatch:"full",component:$t},{path:":id",component:(()=>{class o{constructor(n,s,a){this.activatedRoute=n,this.store=s,this.destroy$=a,this.store.dispatch(new y.uh("rooms")),n.url.pipe((0,P.R)(a),(0,L.b)(([{path:r}])=>{this.store.dispatch(new y.X4({location:+r}))})).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(m.gz),t.Y36(u.yh),t.Y36(S.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-room"]],features:[t._Bn([S.z])],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"z-wave-device-list")},directives:[Dt.k],styles:[""]}),o})()}];let _t=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Et)],m.Bz]}),o})();var jt=e(4189),Ht=e(2004),Lt=e(1736),b=e(3075),Xt=e(4879),Vt=e(8062);let Gt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez]]}),o})();var Kt=e(2048),bt=e(8917),kt=e(3861),qt=e(880),to=e(2824);let oo=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez,_t,T.y4,jt.$,Ht.T,Lt.y,b.UX,Xt.n,Vt._,Gt,B.y,mt,E.Jy,Z.W,K.j,U.uH,qt.I,Kt.Jy,bt.zX,b.u5,kt.pc,R.Cl,to.T]]}),o})()}}]);