"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[403],{1570:(B,h,e)=>{e.d(h,{I:()=>E});var d=e(6895),i=e(6938),u=e(5601),s=e(6246),m=e(4785),t=e(6953),C=e(9518),a=e(4650);let O=(()=>{class v{}return v.\u0275fac=function(S){return new(S||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({imports:[d.ez,u.y,s.Jm,m.sp,t.K,C.W]}),v})();var M=e(7534),f=e(7154),T=e(1195),p=e(4983);let E=(()=>{class v{}return v.\u0275fac=function(S){return new(S||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({imports:[d.ez,i.y,O,M._t,f.Cl,T.Jy,p.T]}),v})()},4432:(B,h,e)=>{e.d(h,{k:()=>I});var d=e(655),i=e(5932),u=e(2124),s=e(9751),m=e(8106),t=e(4650),C=e(6895),a=e(7068),O=e(9300),M=e(3900),f=e(5963),T=e(8651);let p=(()=>{class o{constructor(n){this.window=n}shotVibrate(){window.navigator.vibrate(100)}}return o.\u0275fac=function(n){return new(n||o)(t.LFG("Window"))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var E=e(1644),v=e(5601),D=e(6246),S=e(4785),R=e(9107),g=e(9518);const W=["widget"],r=["id",""];function y(o,l){1&o&&t._UZ(0,"tui-line-clamp",9),2&o&&t.Q6J("content",l.ngIf)("linesLimit",1)}function z(o,l){if(1&o&&t._UZ(0,"z-wave-multilevel-sensor",10),2&o){const n=t.oxw().ngIf;let c,_;t.Q6J("scale",null!==(c=n.scale)&&void 0!==c?c:"")("currentValue",null!==(_=n.level)&&void 0!==_?_:0)("mode",n.deviceType)}}const x=function(){return["sensorMultilevel","switchMultilevel"]};function A(o,l){if(1&o&&(t.TgZ(0,"tui-island",1,2),t._UZ(2,"tui-avatar",3),t.TgZ(3,"div",4),t._UZ(4,"tui-line-clamp",5),t.YNc(5,y,1,2,"tui-line-clamp",6),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",7),t.YNc(8,z,1,3,"z-wave-multilevel-sensor",8),t.qZA()()),2&o){const n=l.ngIf,c=t.oxw();t.xp6(2),t.Q6J("avatarUrl",n.iconPath)("rounded",!0),t.xp6(2),t.Q6J("content",n.title)("linesLimit",1),t.xp6(1),t.Q6J("ngIf",t.lcZ(6,6,c.location$)),t.xp6(3),t.Q6J("ngIf",t.DdM(8,x).includes(n.deviceType))}}let P=(()=>{class o{constructor(n,c,_,N,V){this.store=n,this.destroy$=c,this.renderer=_,this.mobileActionsService=N,this.router=V}press(){this.router.navigate(["/element",this.id])}tap(){this.store.dispatch(new T.lH(this.id)),this.renderer.addClass(this.widgetRef.nativeElement,"shake"),this.mobileActionsService.shotVibrate(),(0,f.H)(310).subscribe({complete:()=>this.renderer.removeClass(this.widgetRef.nativeElement,"shake")})}ngOnInit(){this.context$=this.store.select(({devices:{entities:{[this.id]:n}}})=>({iconPath:n.iconPath,title:n.title,inProgress:n.inProgress,location:n.location,updateTime:1e3*n.updateTime,deviceType:n.deviceType,scale:n.metrics.scaleTitle,level:n.metrics.level})),this.location$=this.context$.pipe((0,O.h)(({location:n})=>0!==n),(0,M.w)(({location:n})=>this.store.select(({locations:{entities:c}})=>c?.[n].title)))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(i.yh),t.Y36(m.z),t.Y36(t.Qsj),t.Y36(p),t.Y36(E.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-base-widget","id",""]],viewQuery:function(n,c){if(1&n&&t.Gf(W,5,t.SBq),2&n){let _;t.iGM(_=t.CRH())&&(c.widgetRef=_.first)}},hostBindings:function(n,c){1&n&&t.NdJ("press",function(){return c.press()})("tap",function(){return c.tap()})},inputs:{id:"id"},features:[t._Bn([m.z])],attrs:r,decls:2,vars:3,consts:[["tuiTouchable","transform","class","widget",4,"ngIf"],["tuiTouchable","transform",1,"widget"],["widget",""],["size","m",1,"icon",3,"avatarUrl","rounded"],[1,"title"],[3,"content","linesLimit"],["class","location",3,"content","linesLimit",4,"ngIf"],[1,"metric"],["class","tui-text_body-l-2",3,"scale","currentValue","mode",4,"ngIf"],[1,"location",3,"content","linesLimit"],[1,"tui-text_body-l-2",3,"scale","currentValue","mode"]],template:function(n,c){1&n&&(t.YNc(0,A,9,9,"tui-island",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,c.context$))},dependencies:[C.O5,v.h,D.JP,S.by,R.z,g.u,C.Ov],styles:["[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]{margin:.3rem;box-shadow:0 .25rem 1.5rem #0000001f;display:flex;align-items:center;padding:0 .2rem}[_nghost-%COMP%]   .widget[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;justify-content:flex-end;margin-right:.5rem}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin:.5rem;pointer-events:none}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font:var(--tui-font-text-s)}@keyframes _ngcontent-%COMP%_shake{0%,to,25%{transform:translate(5px)}33%{transform:rotate(1deg)}66%{transform:rotate(-1deg)}75%{transform:translate(-5px)}}[_nghost-%COMP%]   .shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .15s linear 2}"],changeDetection:0}),o})();const L=["id",""];let U=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-device-widget","id",""]],inputs:{id:"id"},attrs:L,decls:1,vars:1,consts:[[1,"device-widget",3,"id"]],template:function(n,c){1&n&&t._UZ(0,"z-wave-base-widget",0),2&n&&t.Q6J("id",c.id)},dependencies:[P],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),o})();var F=e(7154),Y=e(1195),J=e(4570);function w(o,l){1&o&&t._UZ(0,"z-wave-device-widget",5),2&o&&t.Q6J("id",l.$implicit)}function Q(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",3),t.YNc(2,w,1,1,"z-wave-device-widget",4),t.qZA(),t.BQk()),2&o){const n=t.oxw().ngIf;t.xp6(2),t.Q6J("cdkVirtualForOf",n)("cdkVirtualForTemplateCacheSize",0)}}function Z(o,l){if(1&o&&(t.ynx(0),t.YNc(1,Q,3,2,"ng-container",0),t.BQk()),2&o){const n=l.ngIf;t.oxw();const c=t.MAs(5);t.xp6(1),t.Q6J("ngIf",n.length)("ngIfElse",c)}}function K(o,l){1&o&&t._UZ(0,"z-wave-load-screen")}function b(o,l){1&o&&t.Hsn(0)}class I{}I.\u0275fac=function(l){return new(l||I)},I.\u0275cmp=t.Xpm({type:I,selectors:[["z-wave-device-list"]],features:[t._Bn([m.z])],ngContentSelectors:["*"],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["placeHolder",""],["itemSize","69","tuiScrollable","","appendOnly","","zWaveRestorePosition","",1,"device-list","tui-zero-scrollbar"],[3,"id",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[3,"id"]],template:function(l,n){if(1&l&&(t.F$t(),t.YNc(0,Z,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,K,1,0,"ng-template",null,1,t.W1O),t.YNc(4,b,1,0,"ng-template",null,2,t.W1O)),2&l){const c=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.ids$))("ngIfElse",c)}},dependencies:[C.O5,a.K,U,F.xd,F.x0,F.N7,Y.Rm,J.y,C.Ov],styles:["[_nghost-%COMP%]   .device-list[_ngcontent-%COMP%]{height:calc(100vh - 2 * var(--header-heigth))}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}  .cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{width:100%}"],changeDetection:0}),(0,d.gn)([(0,i.Ph)(u.N.showDevice),(0,d.w6)("design:type",s.y)],I.prototype,"ids$",void 0)},4570:(B,h,e)=>{e.d(h,{y:()=>M});var d=e(1644),i=e(9300),u=e(590),s=e(8505),m=e(5932),t=e(4426),C=e(4580),a=e(4650),O=e(7154);let M=(()=>{class f{constructor(p,E,v){this.viewport=p,this.router=E,this.store=v,this.router.events.pipe((0,i.h)(D=>D instanceof d.OD),(0,u.P)(),(0,s.b)(()=>{this.store.dispatch(new t.fj(E.url,p?.measureScrollOffset("top")))})).subscribe()}ngAfterViewInit(){setTimeout(()=>{this.viewport?.scrollTo({top:this.store.selectSnapshot(C.f.position(this.router.url))}),this.viewport.checkViewportSize()},0)}}return f.\u0275fac=function(p){return new(p||f)(a.Y36(O.N7),a.Y36(d.F0),a.Y36(m.yh))},f.\u0275dir=a.lG2({type:f,selectors:[["","zWaveRestorePosition",""]]}),f})()},4983:(B,h,e)=>{e.d(h,{T:()=>u});var d=e(6895),i=e(4650);let u=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[d.ez]}),s})()},7068:(B,h,e)=>{e.d(h,{K:()=>i});var d=e(4650);let i=(()=>{class u{}return u.\u0275fac=function(m){return new(m||u)},u.\u0275cmp=d.Xpm({type:u,selectors:[["z-wave-load-screen"]],decls:4,vars:0,template:function(m,t){1&m&&d._UZ(0,"div")(1,"div")(2,"div")(3,"div")},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;height:100%;padding:2rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{z-index:999;top:33px;width:.7rem;height:.7rem;border-radius:50%;background:var(--tui-primary);animation-timing-function:cubic-bezier(0,1,1,0)}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_lds-ellipsis1 .6s infinite}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_lds-ellipsis2 .6s infinite;margin-right:.7rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_lds-ellipsis2 .6s infinite}[_nghost-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_lds-ellipsis3 .6s infinite}@keyframes _ngcontent-%COMP%_lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes _ngcontent-%COMP%_lds-ellipsis2{0%{transform:translate(-.7rem)}to{transform:translate(.7rem)}}"]}),u})()},6938:(B,h,e)=>{e.d(h,{y:()=>u});var d=e(6895),i=e(4650);let u=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[d.ez]}),s})()},9518:(B,h,e)=>{e.d(h,{u:()=>S,W:()=>R});var d=e(655),i=e(4650),s=e(3679),m=e(7414),t=e(7776),C=e(8923),a=e(1308),O=e(102),M=e(8505),f=e(4004),T=e(3900),p=e(9300),E=e(5698),v=e(2722);const D={transform:"scale(0.95)",opacity:"0.6",background:"rgba(146, 153, 162, 0.12)"};let S=(()=>{class g{constructor(r,y,{nativeElement:z},x,A){if(this.tuiTouchable="",!y)return;const P=r?r.nativeElement:z;(0,s.mL)(P,"touchstart",{passive:!0}).pipe((0,M.b)(()=>{this.onTouchStart(x,P)}),(0,f.U)(({touches:L})=>L[L.length-1].identifier),(0,T.w)(L=>(0,O.S)((0,s.mL)(P,"touchmove",{passive:!0}).pipe((0,p.h)(({touches:U})=>this.hasTouchLeft(P,U,L))),(0,s.mL)(P,"touchend")).pipe((0,E.q)(1))),(0,v.R)(A)).subscribe(()=>{x.removeStyle(P,"transform"),x.removeStyle(P,"opacity"),x.removeStyle(P,"background")})}get style(){return this.tuiTouchable||"transform"}hasTouchLeft(r,y,z){const{ownerDocument:x}=r,A=function u(g,W){for(let r=0;r<g.length;r++){const{identifier:y}=g[r];if(y===W)return r}return-1}(y,z);if(!x||-1===A)return!0;const{clientX:P,clientY:L}=y[A];return!r.contains(x.elementFromPoint(P,L))}onTouchStart(r,y){"transform"!==this.style?r.removeStyle(y,"transition"):r.setStyle(y,"transition","transform 0.2s"),r.setStyle(y,this.style,D[this.style])}}return g.\u0275fac=function(r){return new(r||g)(i.Y36(a.zP,8),i.Y36(m.FA),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(t.a3,2))},g.\u0275dir=i.lG2({type:g,selectors:[["","tuiTouchable",""]],inputs:{tuiTouchable:"tuiTouchable"},features:[i._Bn([t.a3])]}),(0,d.gn)([(0,C.TH)()],g.prototype,"tuiTouchable",void 0),g})(),R=(()=>{class g{}return g.\u0275fac=function(r){return new(r||g)},g.\u0275mod=i.oAB({type:g}),g.\u0275inj=i.cJS({}),g})()},102:(B,h,e)=>{e.d(h,{S:()=>t});var d=e(9751),i=e(8421);const{isArray:u}=Array;var m=e(5403);function t(...a){return 1===(a=function s(a){return 1===a.length&&u(a[0])?a[0]:a}(a)).length?(0,i.Xf)(a[0]):new d.y(function C(a){return O=>{let M=[];for(let f=0;M&&!O.closed&&f<a.length;f++)M.push((0,i.Xf)(a[f]).subscribe(new m.Q(O,T=>{if(M){for(let p=0;p<M.length;p++)p!==f&&M[p].unsubscribe();M=null}O.next(T)})))}}(a))}}}]);