"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[360],{436:(et,B,n)=>{n.r(B),n.d(B,{PersonalSettingsModule:()=>z});var u=n(9808),e=n(3673),C=n(655),m=n(3075),E=n(9606),S=n(6403),L=n(7776),N=n(4004),Q=n(9300),H=n(2722),$=n(1721),G=n(8924),K=n(801),t=n(5e3),J=n(9177),w=n(9837),W=n(5064),j=n(311),U=n(6679),R=n(8177),_=n(2048),V=n(8917),q=n(5601),I=n(9397),b=n(1813),Y=n(5515),F=n(8276),k=n(1195),X=n(9886),i=n(3861),r=n(9444);function l(o,d){if(1&o&&t._UZ(0,"tui-data-list-wrapper",24),2&o){const s=t.oxw(2),a=t.MAs(2);t.Q6J("items",s.languages)("itemContent",a)}}function c(o,d){if(1&o){const s=t.EpF();t.TgZ(0,"tui-tag",29),t.NdJ("edited",function(){const O=t.CHM(s).$implicit;return t.oxw(4).excludeFromHidden(O.id)}),t.qZA()}if(2&o){const s=d.$implicit;t.Q6J("hoverable",!0)("value",s.title||"")("removable",!0)}}function g(o,d){if(1&o&&(t.TgZ(0,"tui-island",17),t.TgZ(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,c,1,3,"tui-tag",28),t.qZA(),t.qZA()),2&o){const s=t.oxw().ngIf,a=t.oxw().$implicit;t.xp6(2),t.hij(" ",a("lb_hidden_events_device")," "),t.xp6(2),t.Q6J("ngForOf",s)}}function h(o,d){if(1&o&&(t.ynx(0),t.YNc(1,g,5,2,"tui-island",25),t.BQk()),2&o){const s=d.ngIf;t.xp6(1),t.Q6J("ngIf",s.length)}}function T(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t._UZ(4,"tui-line-clamp",5),t.qZA(),t.TgZ(5,"tui-badge",6),t._UZ(6,"tui-svg",7),t.qZA(),t.qZA(),t.TgZ(7,"tui-scrollbar",8),t.TgZ(8,"form",9),t.TgZ(9,"tui-input",10),t._uU(10),t._UZ(11,"span",11),t.qZA(),t._UZ(12,"tui-field-error",12),t.TgZ(13,"tui-input",13),t._uU(14),t._UZ(15,"span",11),t.qZA(),t._UZ(16,"tui-field-error",14),t.TgZ(17,"tui-select",15),t._uU(18),t.YNc(19,l,1,2,"tui-data-list-wrapper",16),t.qZA(),t.TgZ(20,"tui-island",17),t.TgZ(21,"div",18),t.TgZ(22,"div",19),t._UZ(23,"tui-toggle",20),t.qZA(),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"tui-island",17),t.TgZ(26,"div",18),t.TgZ(27,"div",19),t._UZ(28,"tui-toggle",21),t.qZA(),t._uU(29),t.qZA(),t.qZA(),t.YNc(30,h,2,1,"ng-container",22),t.ALo(31,"async"),t.TgZ(32,"tui-island",17),t.TgZ(33,"div",18),t.TgZ(34,"span"),t._UZ(35,"fa-icon",23),t._uU(36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&o){const s=d.$implicit,a=t.oxw(),p=t.MAs(2);let O,x;t.xp6(4),t.Q6J("content",s("settings"))("lineHeight",26)("linesLimit",1),t.xp6(3),t.Q6J("hidden",!0),t.xp6(1),t.Q6J("formGroup",a.settings),t.xp6(1),t.Q6J("tuiTextfieldExampleText",null!==(O=a.profile.name)&&void 0!==O?O:""),t.xp6(1),t.hij(" ",s("lb_login")," "),t.xp6(3),t.Q6J("tuiTextfieldExampleText",null!==(x=a.profile.email)&&void 0!==x?x:""),t.xp6(1),t.hij(" ",s("lb_email")," "),t.xp6(3),t.Q6J("valueContent",p),t.xp6(1),t.hij(" ",s("lb_language")," "),t.xp6(6),t.hij(" ",s("lb_hide_device_events")," "),t.xp6(5),t.hij(" ",s("lb_hide_system_events")," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(31,17,a.hiddenDevices$)),t.xp6(5),t.Q6J("icon",a.faMobileAlt),t.xp6(1),t.AsE(" ",s("version"),": ",a.version," ")}}function f(o,d){if(1&o&&(t.TgZ(0,"div",30),t.TgZ(1,"span",31),t._uU(2),t.qZA(),t._UZ(3,"img",32),t.qZA()),2&o){const s=d.$implicit;t.xp6(2),t.Oqu(s.title),t.xp6(1),t.Q6J("src",s.img,t.LSH)("alt",s.name)}}let v=(()=>{class o{constructor(s){var a,p;this.id=s,this.img=o.apiUrl+this.id+".png",this.title=null!==(p=null===(a=o.lang)||void 0===a?void 0:a[s])&&void 0!==p?p:s}}return o.apiUrl="assets/img/flags/",o.lang={en:"English",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},o})();const M=[{path:"",component:(()=>{class o{constructor(s,a,p,O){this.formBuilder=s,this.store=a,this.translocoService=p,this.destroy$=O,this.version=G.N.version,this.faMobileAlt=K.bJI,this.languages=this.translocoService.getAvailableLangs().map(x=>new v(x.toString())),this.profile=this.store.selectSnapshot(S.k.profile),this.settings=this.formBuilder.group({name:[this.profile.name,[m.kI.required]],email:[this.profile.email,[m.kI.email]],lang:[this.languages.find(x=>x.id===this.translocoService.getActiveLang())],hideSystemEvents:[this.profile.hideSystemEvents],hideAllDeviceEvents:[this.profile.hideAllDeviceEvents]}),this.hiddenDevices$=this.store.select(S.k.profile).pipe(function D(...o){const d=o.length;if(0===d)throw new Error("list of properties cannot be empty.");return(0,N.U)(s=>{let a=s;for(let p=0;p<d;p++){const O=null==a?void 0:a[o[p]];if(void 0===O)return;a=O}return a})}("hideSingleDeviceEvents"),(0,Q.h)(x=>Array.isArray(x)),(0,N.U)(x=>x.map(nt=>({id:nt,title:this.store.selectSnapshot(({devices:it})=>{var tt;return null===(tt=it.entities[nt])||void 0===tt?void 0:tt.title})}))))}ngAfterViewInit(){this.settings.valueChanges.pipe((0,H.R)(this.destroy$),(0,N.U)(s=>{if(this.settings.valid){const{lang:a}=s,p=(0,C._T)(s,["lang"]);return p.lang=a.id,p.synchronized=!1,this.store.dispatch(new $.Bc(p)),"success"}return"error"})).subscribe()}excludeFromHidden(s){this.store.dispatch(new $.Bc({hideSingleDeviceEvents:this.store.selectSnapshot(S.k.profile).hideSingleDeviceEvents.filter(a=>a!==s),synchronized:!1}))}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(m.qu),t.Y36(E.yh),t.Y36(J.Vn),t.Y36(L.a3))},o.\u0275cmp=t.Xpm({type:o,selectors:[["z-wave-personal-settings"]],features:[t._Bn([L.a3])],decls:3,vars:0,consts:[[4,"transloco"],["langContent",""],[1,"room-config","tui-container_adaptive"],[1,"back-wrapper","shadow"],[1,"title","tui-text_body-xl"],[3,"content","lineHeight","linesLimit"],["status","custom","zWaveBackButton","",1,"tui-space_right-3","back-button"],["src","tuiIconRemoveLarge"],["tuiOverscroll","scroll",1,"content",3,"hidden"],[1,"personal-settings",3,"formGroup"],["formControlName","name",1,"personal-settings-item",3,"tuiTextfieldExampleText"],[1,"tui-required"],["formControlName","name"],["formControlName","email",1,"personal-settings-item",3,"tuiTextfieldExampleText"],["formControlName","email"],["formControlName","lang",1,"personal-settings-item",3,"valueContent"],[3,"items","itemContent",4,"tuiDataList"],["size","m",1,"personal-settings-item"],[1,"tui-island__content"],[1,"tui-island__figure"],["formControlName","hideAllDeviceEvents","size","m",2,"align-self","center"],["formControlName","hideSystemEvents","size","m",2,"align-self","center"],[4,"ngIf"],[1,"tui-space_right-2",3,"icon"],[3,"items","itemContent"],["size","m","class","personal-settings-item",4,"ngIf"],[1,"tui-island__header"],[1,"tui-island__content","tag-block"],["size","l","status","custom","class","tag hidden-device",3,"hoverable","value","removable","edited",4,"ngFor","ngForOf"],["size","l","status","custom",1,"tag","hidden-device",3,"hoverable","value","removable","edited"],[1,"lang-item"],[1,"lang-name"],[3,"src","alt"]],template:function(s,a){1&s&&(t.YNc(0,T,37,19,"ng-container",0),t.YNc(1,f,4,3,"ng-template",null,1,t.W1O))},directives:[J.KI,W.by,j.g,Y.z,F.P,k.IB,w.W,m._Y,m.JL,m.sg,U.K3,U.wU,m.JJ,m.u,X._K,R.y,_.uJ,_.OI,i.gX,V.eC,q.h,I.ph,u.O5,u.sg,b.Gi,r.BN],pipes:[u.Ov],styles:["[_nghost-%COMP%]   .space[_ngcontent-%COMP%]{padding:0 .5rem}[_nghost-%COMP%]   .room-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .room-config[_ngcontent-%COMP%]   .back-wrapper[_ngcontent-%COMP%]{display:flex;padding:1rem 0;align-items:center;border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}[_nghost-%COMP%]   .room-config[_ngcontent-%COMP%]   .back-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;flex:1 1 auto}[_nghost-%COMP%]   .room-config[_ngcontent-%COMP%]   .back-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background-color:var(--tui-base-05)}[_nghost-%COMP%]   .room-config[_ngcontent-%COMP%]   .shadow[_ngcontent-%COMP%]{box-shadow:0 .125rem 1rem #00000014}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{overflow:auto;height:calc(100% - var(--header-heigth));padding:0 .5em}[_nghost-%COMP%]   .personal-settings[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .personal-settings[_ngcontent-%COMP%]   .personal-settings-item[_ngcontent-%COMP%]{margin-bottom:1rem}[_nghost-%COMP%]   .hidden-device[_ngcontent-%COMP%]{margin:.25rem;background-color:var(--tui-support-15)}[_nghost-%COMP%]   .tag-block[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:left}.lang-item[_ngcontent-%COMP%]{display:grid;width:100%;align-items:center;grid-template-columns:repeat(3,1fr)}"],changeDetection:0}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[e.Bz.forChild(M)],e.Bz]}),o})();var P=n(2077),A=n(4879);let z=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,y,J.y4,W.sp,j.f,F.E,A.n,k.Jy,w.e,m.UX,U.Qf,X.cn,P.cy,R.C,_.Jy,V.zX,q.y,I.YM,r.uH,b.d3]]}),o})()},5064:(et,B,n)=>{n.d(B,{by:()=>Y,sp:()=>X});var u=n(2014),e=n(5e3),C=n(2832),m=n(7776);let E=(()=>{let i=class{constructor(l){this.tuiResize=l}};return i.\u0275fac=function(l){return new(l||i)(e.Y36(m.tl))},i.\u0275dir=e.lG2({type:i,selectors:[["","tuiResize",""]],outputs:{tuiResize:"tuiResize"},features:[e._Bn([m.a3,m.tl])]}),i=(0,C.gn)([(0,C.fM)(0,(0,e.tBr)(m.tl))],i),i})(),S=(()=>{let i=class{};return i.\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var L=n(3679),N=n(3054),D=n(8923),Q=n(8535),H=n(9740),$=n(1135),G=n(9646),K=n(8675),t=n(1520),J=n(3900),w=n(9300),W=n(9718),j=n(4004),U=n(2722),R=n(9808),_=n(9892);function I(i,r,l,c){const{ownerDocument:g}=r;if(!g)return;const h=g.createTreeWalker(r,NodeFilter.SHOW_TEXT,Q.Lw,!1);for(h.currentNode=r;h.nextNode();)if(h.currentNode.nodeType===Node.TEXT_NODE){const T=h.currentNode.nodeValue?h.currentNode.nodeValue.length:0;l>T?l-=T:i[c](h.currentNode,l)}}var b=n(9870);let Y=(()=>{let i=class{constructor(l,c){this.elementRef=l,this.linesLimit$=new $.X(1),this.initialized=!1,this.lineHeight=24,this.content="",setTimeout(()=>{c.addClass(this.elementRef.nativeElement,"_initialized")})}set linesLimit(l){this.linesLimit$.next(l)}get lineClamp$(){return this.linesLimit$.pipe((0,K.O)(1),(0,t.G)(),(0,J.w)(([l,c])=>c>=l?(0,G.of)(c):(0,L.eh)(this.elementRef.nativeElement,"transitionend").pipe((0,w.h)(N.Xr),(0,W.h)(c))))}get overflown(){if(!this.outlet)return!1;const{scrollHeight:l,scrollWidth:c}=this.outlet.nativeElement,{clientHeight:g,clientWidth:h}=this.elementRef.nativeElement;return l-g>4||c-h>0}get computedContent(){return this.overflown?this.content:""}get oneLine(){return 1===this.linesLimit$.value}get maxHeight(){return this.initialized?this.lineHeight*this.linesLimit$.value:null}get height(){return this.outlet?this.outlet.nativeElement.scrollHeight+4||null:0}markForCheck(){}ngAfterViewInit(){this.initialized=!0}};return i.\u0275fac=function(l){return new(l||i)(e.Y36(e.SBq),e.Y36(e.Qsj))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tui-line-clamp"]],viewQuery:function(l,c){if(1&l&&e.Gf(H.r1,5,e.SBq),2&l){let g;e.iGM(g=e.CRH())&&(c.outlet=g.first)}},hostVars:4,hostBindings:function(l,c){1&l&&e.NdJ("mouseenter",function(){return c.markForCheck()}),2&l&&e.Udp("max-height",c.maxHeight,"px")("height",c.height,"px")},inputs:{lineHeight:"lineHeight",content:"content",linesLimit:"linesLimit"},decls:2,vars:8,consts:[["polymorpheus-outlet","","lineClamp","","tuiHintId","unnecessary","tuiHintMode","overflow",1,"wrapper",3,"tuiHint","content","tuiResize"]],template:function(l,c){1&l&&(e.TgZ(0,"div",0),e.NdJ("tuiResize",function(){return c.markForCheck()}),e.ALo(1,"async"),e.qZA()),2&l&&(e.Udp("-webkit-line-clamp",e.lcZ(1,6,c.lineClamp$)),e.ekj("wrapper_ellipsis",c.oneLine),e.Q6J("tuiHint",c.computedContent)("content",c.content))},directives:function(){return[H.r1,k,b.D,E]},pipes:function(){return[R.Ov]},styles:["[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._initialized[_nghost-%COMP%]{transition-property:max-height;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out}.wrapper[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}.wrapper_ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}"],changeDetection:0}),(0,u.gn)([(0,e.i9L)(H.r1,{read:e.SBq})],i.prototype,"outlet",void 0),(0,u.gn)([(0,e.IIB)(),(0,D.TH)()],i.prototype,"linesLimit",null),(0,u.gn)([(0,e.IIB)(),(0,D.TH)()],i.prototype,"lineHeight",void 0),(0,u.gn)([(0,e.IIB)(),(0,D.TH)()],i.prototype,"content",void 0),(0,u.gn)([D.UM],i.prototype,"lineClamp$",null),(0,u.gn)([(0,e.pfw)("style.maxHeight.px")],i.prototype,"maxHeight",null),(0,u.gn)([(0,e.pfw)("style.height.px")],i.prototype,"height",null),(0,u.gn)([(0,e.L6J)("mouseenter")],i.prototype,"markForCheck",null),i=(0,u.gn)([(0,u.fM)(0,(0,e.tBr)(e.SBq)),(0,u.fM)(1,(0,e.tBr)(e.Qsj))],i),i})(),k=(()=>{let i=class{constructor(l,c,g,h,T,{nativeElement:f},v,Z,M){if(M.supports("-webkit-line-clamp","1")||!(f.parentElement instanceof HTMLElement))return;const y=g.createRange(),P=h.createElement("div"),{parentElement:A}=f,{style:z}=P;z.position="absolute",z.bottom="0",z.left="-200px",P.textContent=Q.Qg,c.element.nativeElement.appendChild(P),Z.pipe((0,j.U)(()=>{if(l.oneLine||f.scrollHeight-A.clientHeight<4)return-200;let o=0;const d=f.textContent?f.textContent.length:0;for(let s=0;s<d-2;s++){I(y,f,s,"setStart"),I(y,f,s+1,"setEnd");const a=y.getBoundingClientRect(),p=A.getBoundingClientRect();if(Math.round(a.top-p.bottom)>=0)break;o=a.right-p.left}return o}),(0,L.fL)(T),(0,U.R)(v)).subscribe(o=>{z.left=`${o}px`})}};return i.\u0275fac=function(l){return new(l||i)(e.Y36(Y),e.Y36(e.s_b),e.Y36(R.K0),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(m.a3),e.Y36(_.L1),e.Y36(_.ux))},i.\u0275dir=e.lG2({type:i,selectors:[["","lineClamp",""]],features:[e._Bn([m.a3])]}),i=(0,u.gn)([(0,u.fM)(0,(0,e.tBr)(Y)),(0,u.fM)(1,(0,e.tBr)(e.s_b)),(0,u.fM)(2,(0,e.tBr)(R.K0)),(0,u.fM)(3,(0,e.tBr)(e.Qsj)),(0,u.fM)(4,(0,e.tBr)(e.R0b)),(0,u.fM)(5,(0,e.tBr)(e.SBq)),(0,u.fM)(6,(0,e.tBr)(m.a3)),(0,u.fM)(7,(0,e.tBr)(_.L1)),(0,u.fM)(8,(0,e.tBr)(_.ux))],i),i})(),X=(()=>{let i=class{};return i.\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[R.ez,H.wq,b.go,S]]}),i})()},9368:(et,B,n)=>{function u(e){if(""===e)return"";let C=0;for(let L=0;L<e.length;L++)C=e.charCodeAt(L)+((C<<5)-C),C&=C;return`hsl(${C%360},${60+C%5}%,${80+C%5}%)`}n.d(B,{Z:()=>u})}}]);